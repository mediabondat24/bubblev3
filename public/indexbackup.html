<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-3CM2JCDYNF"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-3CM2JCDYNF');
  </script>
  <script>
        // Fungsi untuk mengisi input otomatis
        window.onload = function() {
            document.getElementById('uniqueIdInput').value = 'bubblefoto';
        };
    </script>
    
<style>
.blurred {
            filter: blur(5px);
            transition: filter 0.3s ease;
        }
   #petunjuk {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 700px; /* Sesuaikan dengan lebar elemen */
            height: 120px; /* Sesuaikan dengan tinggi elemen */
            background-color: #212427;
            color: #fff;
            text-align: center;
            line-height: 100px;
            font-family: Arial, sans-serif;
        }
        #animation-container span{
          position: absolute;
          color: #9e072a;
        }
</style>
<script>
        function toggleBlur(image) {
            image.classList.toggle('blurred');
        }
    </script>

<style>
    
    #button-container {
      position: fixed;
      top: 10px;
      left: 10px;
      z-index: 2;
    }

    #animation-container {
      position: relative;
    }

    

    .photo {
      position: absolute;
      border-radius: 20px;
      transition: transform 5s ease-in-out, opacity 2s ease-in-out; /* Sesuaikan durasi transisi sesuai kebutuhan */
    }
  </style>
  <style>

        body {
            margin: 0;
            background: transparent;
            position: relative;
            height: 100vh;
        }

        .rocket {
            position: absolute;
            width: 8vmin;
            height: 8vmin;
            border-radius: 50%;
            background-size: cover;
            bottom: -10vmin;
            left: 50%;
            animation: rocketAppear 0.5s ease-in-out forwards, rocketLaunch var(--rocket-launch-duration) ease-in-out forwards;
        }

        .rocket::before {
            content: '';
            position: absolute;
            width: 2vmin;
            height: 10vmin;
            background: linear-gradient(to bottom, rgba(255, 165, 0, 0.8), rgba(255, 69, 0, 0));
            bottom: -10vmin;
            left: 50%;
            transform: translateX(-50%);
            animation: fireTail 0.1s infinite, fireTailHide 0.8s ease-out forwards calc(var(--rocket-launch-duration) - 0.5s);
        }

        @keyframes rocketAppear {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @keyframes fireTail {
            0% {
                background: linear-gradient(to bottom, rgba(255, 165, 0, 0.8), rgba(255, 69, 0, 0));
            }

            50% {
                background: linear-gradient(to bottom, rgba(255, 165, 0, 0.8), rgba(255, 69, 0, 0), rgba(255, 69, 0, 0));
            }

            100% {
                background: linear-gradient(to bottom, rgba(255, 165, 0, 0.8), rgba(255, 69, 0, 0));
            }
        }

        @keyframes fireTailHide {
            0% {
                opacity: 0.8;
            }

            100% {
                opacity: 0;
            }
        }

        .username {
            font-family: "Edu AU VIC WA NT Dots", cursive;
            font-optical-sizing: auto;
            font-weight: 400;
            font-style: normal;
            min-width: 80vmin;
            text-align: center;
            background-color: transparent;
            min-height: 20vmin;

            margin-left: -39vmin;
            margin-bottom: -8vmin;
            vertical-align: middle;
            line-height: 20vmin;
            animation: usernameGlow 1s ease-in-out infinite alternate, usernameZoom 2s ease-in-out forwards, usernameHide 3s ease-in-out forwards 3s;
        }

        @keyframes usernameGlow {
            from {
                text-shadow: 0 0 10px #fff, 0 0 10px #fff, 0 0 10px rgb(252, 168, 51), 0 0 10px rgb(252, 168, 51), 0 0 50px rgb(252, 168, 51), 0 0 10px rgb(252, 168, 51), 0 0 10px rgb(252, 168, 51);
                transform: scale(0.5);
            }

            to {
                text-shadow: 0 0 20px #fff, 0 0 10px rgb(255, 217, 0), 0 0 10px rgb(255, 217, 0), 0 0 10px rgb(255, 217, 0), 0 0 10px rgb(255, 217, 0), 0 0 10px rgb(255, 217, 0), 0 0 10px rgb(255, 217, 0);
                transform: scale(1);
            }
        }

        @keyframes usernameZoom {
            from {
                transform: scale(0.01) rotate(0deg);
            }

            to {
                transform: scale(1) rotate(var(--username-rotate));
            }
        }

        @keyframes usernameHide {
            from {
                opacity: 1;
                transform: translateY(0vmin) rotate(var(--username-rotate));
            }

            to {
                opacity: 0;
                transform: translateY(3vmin) rotate(calc(var(--username-rotate) + 2deg));
            }
        }

        @keyframes rocketLaunch {
            0% {
                bottom: 0;
                transform: translateX(-50%);
            }

            100% {
                bottom: var(--rocket-offset-bottom);
                transform: translateX(calc(-60% + var(--rocket-offset)));
            }
        }

        @keyframes rocketExplode {
            0% {
                bottom: var(--rocket-offset-bottom);
                transform: translateX(calc(-60% + var(--rocket-offset))) scale(1);
            }

            100% {
                bottom: var(--rocket-offset-bottom);
                transform: translateX(calc(-60% + var(--rocket-offset))) scale(1.5);
            }
        }

        @keyframes rocketHide {
            0% {
                bottom: var(--rocket-offset-bottom);
                transform: translateX(calc(-60% + var(--rocket-offset))) scale(1.5);
                opacity: 1;
            }

            100% {
                bottom: var(--rocket-offset-bottom);
                transform: translateX(calc(-60% + var(--rocket-offset))) scale(1.5);
                opacity: 0;
            }
        }

        .explosion {
            position: absolute;
            width: 6vmin;
            height: 6vmin;
            background-size: cover;
            animation: explosionEffect 2.5s ease-out forwards;
        }

        @keyframes explosionEffect {
            0% {
                transform: scale(0.5);
                opacity: 1;
            }

            30% {
                transform: translate(calc(var(--x) * 10vmin), calc(var(--y) * 10vmin)) scale(1.5);
                opacity: 1;
            }

            60% {
                transform: translate(calc(var(--x) * 25vmin), calc(var(--y) * 25vmin)) scale(2.8);
                opacity: 0.8;
            }

            80% {
                transform: translate(calc(var(--x) * 35vmin), calc(var(--y) * 35vmin)) scale(3);
                opacity: 0.6;
            }

            100% {
                transform: translate(calc(var(--x) * 40vmin), calc(var(--y) * 40vmin)) scale(0.8);
                opacity: 0;
            }
        }
    </style>
 
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TikTok LIVE</title> 
    <meta name="referrer" content="strict-origin-when-cross-origin">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"  crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.4.1/socket.io.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <script src="https://code.responsivevoice.org/responsivevoice.js?key=s7MjjIgj"></script>

    <script src="connection.js"></script>
    <script src="app.js"></script>
    
    <style>
  .running-text-container {
    position: fixed;
    top: 100px; /* Posisikan di bagian atas */
    left: 50%; /* Tengah */
    transform: translateX(-50%); /* Memusatkan */
    width: 500px; /* Lebar kontainer */
    background: rgba(0, 0, 0, 0.5); /* Latar belakang transparan */
    color: white;
    font-size: 10px;
    text-align: center;
    padding: 50px 0;
    z-index: -0; /* Pastikan berada di atas elemen lain */
}

.top-giver {
    position: absolute;
}

.top-giver-content {
    display: flex;
    flex-direction: column;
    align-items: center; /* Pusatkan elemen secara horizontal */
}

.top-giver-rank {
    margin-bottom: 5px; /* Jarak antara TOP dan profil picture */
}

/* Untuk Top 1 */
.top-1 {
    top: 0px;
    left: 50%;
    transform: translateX(-50%);
}

/* Untuk Top 2 */
.top-2 {
    top: 85px;
    left: 30%;
    transform: translateX(-50%);
}

/* Untuk Top 3 */
.top-3 {
    top: 85px;
    left: 70%;
    transform: translateX(-50%);
}

.top-1-img {
    position: absolute;
    top: 350px; /* Posisi di bawah top 2 dan top 3 */
    left: 50%;
    transform: translateX(-50%);
    width: 200px; /* Sesuaikan ukuran gambar */
    height: 200px;
    border-radius: 50%;
    z-index: -1;
}

</style>


   
</head>
<body style="background-size: cover;">
  <div id="petunjuk">
    <h3>OKE KEREN!! TOMBOL PENGATURAN ADA DIBAWAH</h3>
</div>
<div class="running-text-container">
  <div class="running-text">
    Selamat datang di live Bubble Foto, Tunjukkan Pesonamu
  </div>
</div>
  <div id="imagePreload" style="display: none; position: absolute;"></div>
    <div id="animation-container">
        <!-- Animasi foto akan ditampilkan di sini -->
         
      </div>
<center>

    <button class="btn btn-primary" style="position: absolute;margin-top:1000px;margin-left:-60px" onclick="openmodal()">PENGATURAN</button>
    <br><br>
</center>
   
      <div class="card-body">
 </div>


</body>
 </html>
  

<script>  
setTimeout(() => {
  openmodal();
  // masukanpoto();

}, 500);

function masukanpoto(){
  var img = "https://img.freepik.com/premium-vector/tik-tok-logo_578229-290.jpg";
  addBubble("small",img);
  addBubble("small",img);
  addBubble("small",img);
 
}
function tutupmodal(){
 
  scrollToTop();
  $("#addBubbleModal").modal("hide");
  petunjuk();
}
function petunjuk(){

  setTimeout(() => {
    $("#petunjuk").hide(3000);
  }, 6000);
  setTimeout(() => {
    masukanpoto();
  }, 4000);
   
}

    function toggleFullScreen() {
            const doc = window.document;
            const docEl = doc.documentElement;

            const requestFullScreen = docEl.requestFullscreen || docEl.mozRequestFullScreen || docEl.webkitRequestFullScreen || docEl.msRequestFullscreen;
            const exitFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;

            if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
                requestFullScreen.call(docEl);
            } else {
                exitFullScreen.call(doc);
            }
        }
     

       
var no =1;
var jawab = "xmxmxmmx";
var alias = "xmxmxmmx";
var koin=0;
var mode = "soal";

 
$(".chatcontainer").show();
$(".chatcontainer2").hide();
$(".chatcontainer3").hide();
function jawaban(komentar,poto,nama){
     
  
} 

 var ganti=true;
 
 function okey(foto,nama,g=false){
   
   
        $("#namas").html(nama);
        var element = document.getElementById("g");
        element.src= foto;  
         
        
 }

 function bahaya(){
  var element = document.getElementById("g");
        element.src= "https://img.freepik.com/premium-vector/tik-tok-logo_578229-290.jpg"; 
 }
 
 
      var start=true;
      
      function jo(){
         if(start==true){
             start=false;
         }else{
               start=true;
         }
      }

    function hapus_class(){
      $("#g").hide(300);
      $("#g").show(1000);
    }  

    function add_class(){
      $("#g").hide(300);
      $("#g").show(1000);
    }  
      
     function gift(foto,nama,sts=false,g=false,ket=null,kom=null,jml_coin=1){
      var gift = document.getElementById("gift");
if (gift.checked) {
  var opsi_gift = true;
} else {
  var opsi_gift = false;
}

var follow = document.getElementById("follow");
if (follow.checked) {
  var opsi_follow = true;
} else {
  var opsi_follow = false;
}

var share = document.getElementById("share");
if (share.checked) {
  var opsi_share = true;
} else {
  var opsi_share = false;
}

var like = document.getElementById("like");
if (like.checked) {
  var opsi_like = true;
} else {
  var opsi_like = false;
}

var join = document.getElementById("join");
if (join.checked) {
  var opsi_join = true;
} else {
  var opsi_join = false;
}
var key = document.getElementById("key");
if (key.checked) {
  var opsi_key = true;
} else {
  var opsi_key = false;
}

 
         if(sts==true && ganti==true){
          console.log("jml"+jml_coin);
        var min_coin = $("[name='min_coin']").val();
        console.log("min"+min_coin);
     

          if(jml_coin>=min_coin){
                ganti=false;
                if(opsi_gift==true){
                  
                  add_class();

                  okey(foto,nama,g); 
                  setTimeout(() => {
                                    ganti=true;
                      },7000);
                      return true;
                }else{
                  ganti=true;
                }
            }
                
         }
         
          if(sts==true && ganti==false){ 
            console.log("jml"+jml_coin);
var min_coin = $("[name='min_coin']").val();
console.log("min"+min_coin);


            if(jml_coin>=min_coin){
              if(opsi_gift==true){
                add_class();

                  setTimeout(() => {
                        okey(foto,nama,g); 
                  
                    },5000);
                    
                    setTimeout(() => {
                                  ganti=true;
                    },10000);
                  }else{
                    ganti=true;
                  }
              }
               
          }
          
    if(ket=="like" && opsi_like==true)      
    {      
            if(sts==false && ganti==true){ 
              hapus_class();
                            okey(foto,nama); 
                                    ganti=true; 
            }
    }

   else if(ket=="share" && opsi_share==true)      
    {      
            if(sts==false && ganti==true){ 
              hapus_class();
                            okey(foto,nama); 
                                    ganti=true; 
            }
    }

   else if(ket=="follow" && opsi_follow==true)      
    {      
            if(sts==false && ganti==true){ 
              hapus_class();
                            okey(foto,nama); 
                                    ganti=true; 
            }
    }
    else if(ket=="join" && opsi_join==true)      
    {      
            if(sts==false && ganti==true){ 
              hapus_class();
                            okey(foto,nama); 
                                    ganti=true; 
            }
    }
    else if(ket=="chat" && opsi_key==true)      
    {      
      var komentar_system = kom;
           var komen_status = false;
             var keyword = $("[name='komentar']").val();
              const isKeywordExists = komentar_system.toLowerCase().includes(keyword.toLowerCase());
              if(isKeywordExists!=false){ 
                var komen_status = true;
              }else if(keyword==""){
                var komen_status = true;
              }
            if(sts==false && ganti==true && komen_status==true){ 
              hapus_class();
                            okey(foto,nama); 
                                    ganti=true; 
            }
    }
     
     }
         
  
</script>

<script>
    let photoCount = 0;
    let speed = 5000; // Kecepatan default, diatur dalam milidetik

    function addBubble(size,img,coint=1) {



      const photo = document.createElement('img');
      photo.src = img; // Ganti dengan nama foto Anda
      photo.classList.add('photo');
      // photo.id = `photo-${photoCount}`;
      photo.id = `photo-${photoCount}`;
      photo.setAttribute('onclick', 'toggleBlur(this)');
      
const container = document.getElementById('animation-container');
container.appendChild(photo);

      let durationInput;
   
    
    if (size === 'small') {
        photo.style.width = '50px';
        photo.style.height = '50px';
        durationInput = document.getElementById('smallDuration');
        var colors = ['red', 'green', 'blue', 'yellow', 'orange', 'purple', 'cyan', 'magenta','orange','#2F4F4F','#1E90FF','#CD5C5C','#20B2AA','#C71585','#DDA0DD','#9ACD32']; 
        var randomColor = colors[Math.floor(Math.random() * colors.length)]; 
        photo.style.border = '2px solid ' + randomColor;

      } else if (size === 'medium') {
        photo.style.width = '120px';
        photo.style.height = '120px';
        durationInput = document.getElementById('mediumDuration');
        photo.style.zIndex = coint;
        
        var colors = ['red', 'green', 'blue', 'yellow', 'orange', 'purple', 'cyan', 'magenta','orange','#2F4F4F','#1E90FF','#CD5C5C','#20B2AA','#C71585','#DDA0DD','#9ACD32']; 
        var randomColor = colors[Math.floor(Math.random() * colors.length)]; 
        photo.style.border = '2px solid ' + randomColor;
        photo.style.boxShadow = '0 0 10px ' + randomColor;
      }else if (size === 'large') {
        photo.style.width = '250px';
        photo.style.height = '250px';
        durationInput = document.getElementById('largeDuration');
        photo.style.zIndex = coint+1;
        
        var colors = ['red', 'green', 'blue', 'yellow', 'orange', 'purple', 'cyan', 'magenta','orange','#2F4F4F','#1E90FF','#CD5C5C','#20B2AA','#C71585','#DDA0DD','#9ACD32']; 
        var randomColor = colors[Math.floor(Math.random() * colors.length)]; 
        photo.style.border = '2px solid ' + randomColor;
        photo.style.boxShadow = '0 0 10px ' + randomColor;

      }else if (size === 'supermedium') {
        photo.style.width = '120px';
        photo.style.height = '120px';
        photo.style.borderRadius = '240px';
        durationInput = document.getElementById('mediumDuration');
        photo.style.zIndex = coint;
       var colors = ['red', 'green', 'blue', 'yellow', 'orange', 'purple', 'cyan', 'magenta','orange','#2F4F4F','#1E90FF','#CD5C5C','#20B2AA','#C71585','#DDA0DD','#9ACD32']; 
        var randomColor = colors[Math.floor(Math.random() * colors.length)]; 
        photo.style.border = '2px solid ' + randomColor;
        photo.style.boxShadow = '0 0 10px ' + randomColor;
      }else if (size === 'supersmall') {
        photo.style.width = '70px';
        photo.style.height = '70px';
        photo.style.borderRadius = '240px';
        durationInput = document.getElementById('smallDuration');
        photo.style.zIndex = coint;
        var colors = ['red', 'green', 'blue', 'yellow', 'orange', 'purple', 'cyan', 'magenta','orange','#2F4F4F','#1E90FF','#CD5C5C','#20B2AA','#C71585','#DDA0DD','#9ACD32']; 
        var randomColor = colors[Math.floor(Math.random() * colors.length)]; 
        photo.style.border = '2px solid ' + randomColor;
        photo.style.boxShadow = '0 0 10px ' + randomColor;
      }
      
      const fadeoutDuration = durationInput ? parseInt(durationInput.value) * 1000 : 120000; // default 2 menit

      movePhoto(photo.id, fadeoutDuration);
      
      photoCount++;
    }
    
    
    function movePhoto(photoId, fadeoutDuration) {
    const photo = document.getElementById(photoId);
    if (photo === null) {
        return false;
    }

    // Menggunakan getBoundingClientRect() untuk mendapatkan ukuran foto secara akurat
    const rect = photo.getBoundingClientRect();
    const photoWidth = rect.width;
    const photoHeight = rect.height;

    const screenWidth = window.innerWidth;
    const screenHeight = window.innerHeight;

    // Menghitung posisi acak untuk foto
    const randomX = Math.floor(Math.random() * (screenWidth - photoWidth)); 
    const randomY = Math.floor(Math.random() * (screenHeight - photoHeight));

    // Menggunakan transform untuk menggerakkan foto
    photo.style.transform = `translate(${randomX}px, ${randomY}px)`;

    setTimeout(() => {
        fadeOutPhoto(photo.id);
    }, fadeoutDuration);

    setTimeout(() => {
        movePhoto(photoId, fadeoutDuration);
    }, speed); // Menggerakkan foto sesuai kecepatan yang diatur
}


    function resizePhoto(size) {
      const photos = document.querySelectorAll('.photo');
      photos.forEach(photo => {
        const currentWidth = parseInt(photo.style.width, 10) || 100;
        const currentHeight = parseInt(photo.style.height, 10) || 100;

        if (size === 'small') {
          photo.style.width = `${Math.max(currentWidth - 20, 50)}px`;
          photo.style.height = `${Math.max(currentHeight - 20, 50)}px`;
        } else if (size === 'medium') {
          photo.style.width = '150px';
          photo.style.height = '150px';
        } else if (size === 'large') {
          photo.style.width = `${Math.min(currentWidth + 20, 300)}px`;
          photo.style.height = `${Math.min(currentHeight + 20, 300)}px`;
        } else if (size === 'fulllarge') {
          photo.style.width = `${Math.min(currentWidth + 20, 300)}px`;
          photo.style.height = `${Math.min(currentHeight + 20, 300)}px`;
        }
      });
    }

    function changeSpeed(newSpeed) {
      if (newSpeed === 'slow') {
        speed = 10000; // Kecepatan lambat, diatur dalam milidetik
      } else if (newSpeed === 'fast') {
        speed = 3000; // Kecepatan cepat, diatur dalam milidetik
      }
    }

    function fadeOutPhoto(photoId) {
      const photo = document.getElementById(photoId);
          if(photo!==null){
          photo.style.opacity = '0';
          setTimeout(() => {
            photo.remove();
          }, 2000); // Fading selama 2 detik, sesuaikan dengan kebutuhan Anda
      }
    }

    
    function openmodal(){
    $("#addBubbleModal").modal("show");
 }
    function tutup(){
    $("#addBubbleModal").modal("hide");
 }
  </script>

 <div class="modal fade" id="addBubbleModal"  aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="addBubbleModalLabel">Pengaturan</h5>
          <button class='btn btn-danger btn-sm' id="togel" onclick="toggleFullScreen();">FULLSCREEN</button>
          
        </div>
        <div class="modal-body">
          
            

        <pre id="stateText"  style="color:rgb(16, 12, 12)"></pre>
          
          <div class="inputFields" id="hidex"> 
            <center>
              <input type="button" id="connectButton" value="connect">
              <button id="togel" onclick="cek_server();">CEK SERVER</button>
              <button type="button"   onclick="tutupmodal()" >TUTUP</button>
            </center>
          </div>
          </div>
    <div class="card">
    <div class="card-body pd-4">
<table>
  <tr>
    <td colspan="2"><b>PENGATURAN</b></td>
  </tr>
  <tr>
    <td style="width:200px">
      Akun
    </td>
    <td>
      <input id="uniqueIdInput" class="form-control" type="text" placeholder="username tiktokmu">

    </select> 
    </td>
  </tr>
   <tr>
      <td colspan="2"><hr>Musik dari link youtube 
     

 <input type="text" id="youtubeURL" placeholder="Masukkan URL Video YouTube" class="form-control" onchange="playAudio()">
   
<label for="volumeRange"> Volume:</label>
    <input type="range" id="volumeRange" min="0" max="100" value="25"><br>
    
    <div id="player" ></div>
    
    </td>
  </tr>
  <tr>
      <td colspan="2"><hr>Musik dari File Mp3   

<input type="file" id="musik" name="musik" accept=".mp3, .wav"  class="form-control" >
   
    <audio controls loop id="audioPlayer" style="display:none;">
        Your browser does not support the audio element.
    </audio></td>
    <hr>
  </tr>
  <tr>
    <td colspan="2">
        <hr>
        <b>DURASI MUNCUL PHOTO </b>
        <div style="padding:5px">
            <label class="form-check-label" for="gift">
                Photo kecil  <input type="number"   style="max-width: 70px;" id="smallDuration" value="40">   Detik
            </label>
        </div>
        <div style="padding:5px">
            <label class="form-check-label" for="gift">
               Photo sedang  <input type="number"   style="max-width: 70px;"  id="mediumDuration" value="35">   Detik
            </label>
        </div>
        <div style="padding:5px">
            <label class="form-check-label" for="gift">
                Photo besar  <input type="number"   style="max-width: 70px;" id="largeDuration" value="30">   Detik
            </label>
        </div>

      <hr>
      
<table>
  <tr>
    <td><b>KECEPATAN PERGERAKAN PHOTO</b></td>
    <td>
      <div class="btn-group">
        <button class="btn btn-sm btn-primary" onclick="changeSpeed('slow')">Perlahan</button>
        <button class="btn btn-sm btn-danger" onclick="changeSpeed('fast')">Cepat</button></button>
      </div>

    </td>
  </tr>
</table>



<hr>
 <b>AKTIKAN SUARA GOOGLE</b><br>
 <i class="text-danger">Mohon maaf untuk suara masih belum stabil, masih kami sempurnakan</i>
<div class="form-check">
  <input name="vkomen" checked class="form-check-input" type="checkbox" id="vkomen">
  <label class="form-check-label" for="vkomen">
      KOMENTAR DIBACA GOOGLE
  </label>
</div>

<div class="form-check">
  <input name="vjoin" checked class="form-check-input" type="checkbox" id="vjoin">
  <label class="form-check-label" for="vjoin">
      UCAPAN SELAMAT DATANG UNTUK YANG JOIN
  </label>
</div>

<div class="form-check">
  <input name="vgift" checked class="form-check-input" type="checkbox" id="vgift">
  <label class="form-check-label" for="vgift">
      UCAPAN TERIMAKASIH UNTUK YANG GIFT
  </label>
</div>

<div class="form-check">
  <input name="vfollow"   class="form-check-input" type="checkbox" id="vfollow">
  <label class="form-check-label" for="vfollow">
      UCAPAN TERIMAKASIH UNTUK YANG FOLLOW
  </label>
</div>

<div class="form-check">
  <input name="vshare" checked class="form-check-input" type="checkbox" id="vshare">
  <label class="form-check-label" for="vshare">
      UCAPAN TERIMAKASIH UNTUK YANG SHARE
  </label>
</div>

<hr>
<b>OPSI SUARA :</b><br>
<select class="form-control" id="opsi_suara">
  <option value="1">Lucu (contoh: selamat bergabung kak sherina yang baik hati) </option>
  <option value="2">Biasa (contoh: selamat bergabung kak sherina )</option>
</select>

<hr>
Background  
<input type="file" id="background-input" class="form-control" accept="image/*" onchange="changeBackground(event)">
<br>
<div id="gradient-box" style="width:100%;height:50px"></div>
<button class="btn btn-block btn-mini btn-primary" onclick="gra()">Pilih Warna latar belakang</button>
<br><br>
 
    </td> 
  </tr>

  
  <tr>
    <td colspan="2">
   <div id="roomStats" style="color:black;"></div>
           
    </table>


    </td>
  </tr>
    
</table>
</div>
</div>
    
        </div>
       
      </div>
    </div>
  </div>

<script>
   function getRandomColor() {
    const letters = '0123456789ABCDEF';
            let colors = [];
            for (let i = 0; i < 1; i++) {
                let color = '#';
                for (let j = 0; j < 6; j++) {
                    color += letters[Math.floor(Math.random() * 16)];
                }
                colors.push(color);
            }
            return colors.join(', ');
        }
  function getRandomDirection() {
            const directions = ['to right', 'to left'];
            return directions[Math.floor(Math.random() * directions.length)];
        }
  function gra(){
            const startColor = getRandomColor();
            const endColor = getRandomColor();
            const direction = getRandomDirection();

            const gradientBox = document.getElementById('gradient-box');
            gradientBox.style.background = `linear-gradient(${direction}, ${startColor}, ${endColor})`;

            document.body.style.background = `linear-gradient(${direction}, ${startColor}, ${endColor})`;
    
  }
   
    
   // Function to change the background when an image file is selected
function changeBackground(event) {
  const fileInput = event.target;
  const file = fileInput.files[0];
  
  if (file) {
    const reader = new FileReader();
    reader.onload = function (e) {
      document.body.style.backgroundImage = `url('${e.target.result}')`;
      document.body.style.backgroundSize = "cover";
    };
    reader.readAsDataURL(file);
  }
}

// Set initial background image from 'images/background.png' in public folder
document.body.style.backgroundImage = "url('images/background.png')";
document.body.style.backgroundSize = "cover";

  

var sumber=false;


function hapusAngkaDanSimbol(string) {
  // Ekspresi reguler untuk mencocokkan huruf dan spasi
  let regex = /[a-zA-Z\s]/g;
  
  // Menggunakan metode replace() untuk mengganti semua karakter yang tidak cocok dengan string kosong
  let stringHanyaHurufDanSpasi = string.replace(/[^a-zA-Z\s]/g, '');

  return stringHanyaHurufDanSpasi;
}

        var isSpeaking = false;
         let voices = [];
        function populateVoiceList() {
            voices = window.speechSynthesis.getVoices();
        }

        function aktifSuaraKomen(text) {
              var suara_filter = hapusAngkaDanSimbol(text);
                let jumlahKarakter = suara_filter.length;
                if(jumlahKarakter<5){
                   return false;
               }
   
   
   
            // Hentikan suara yang sedang berbicara
            if (isSpeaking) { 
                return false;
            }
            
            isSpeaking = true;

            // Ambil teks dari textarea
         
            var utterance = new SpeechSynthesisUtterance(text);

            // Setel parameter suara
            utterance.lang = 'id-ID'; // Bahasa Indonesia
            utterance.pitch = 1; // Nada
            utterance.rate = 1; // Kecepatan
            utterance.volume = 1; // Volume

            // Pilih suara dari daftar suara yang tersedia
            const indonesianVoice = voices.find(voice => voice.lang === 'id-ID');
            if (indonesianVoice) {
                utterance.voice = indonesianVoice;
            } else {
                console.warn('Suara bahasa Indonesia tidak ditemukan.');
            }

            // Tambahkan event listener untuk mengetahui kapan teks selesai dibunyikan
            utterance.onend = function(event) {
                 isSpeaking=false;
            };

            // Mulai berbicara
            window.speechSynthesis.speak(utterance);
 
        }

        // Pastikan suara sudah dimuat sebelum memanggil speak()
        window.speechSynthesis.onvoiceschanged = function() {
            populateVoiceList();
        };

        
        populateVoiceList();
        
 

function aktifSuara(suaras,jenis){

      var suara_ =  suaras.toLowerCase();
      let suar = suara_.replace(/cara/g, "metode");
      let suara = suar.replace(/kontol/g, "");
      
      var vgift = document.getElementById("vgift");
      if (vgift.checked && jenis=="gift") {
        if(responsiveVoice.isPlaying() && sumber!=true) {
          responsiveVoice.cancel();
        }
        sumber = true;
      
          if(!responsiveVoice.isPlaying()) {
            sumber = true;
            bunyi(suara,jenis);  
            }else{
              sumber=true;
              setTimeout(() => {
                sumber=true;
                bunyi(suara,jenis);
              }, 2500);
            }   
            
            setTimeout(() => {
          sumber=false;
        }, 15000);

      }  
  
  
      var vkomen = document.getElementById("vkomen");
      if (vkomen.checked && jenis=="komen") {
        if(sumber!=true){
          if(!responsiveVoice.isPlaying()) {
            bunyi(suara,jenis);  
            }
          }  
      }  
   
      var vjoin = document.getElementById("vjoin");
      if (vjoin.checked && jenis=="join") {
        if(sumber!=true){
          if(!responsiveVoice.isPlaying()) {
            bunyi(suara,jenis);  
            }
          }  

      }  
    
      var vshare = document.getElementById("vshare");
      if (vshare.checked && jenis=="share") {
          if(sumber!=true){
          if(!responsiveVoice.isPlaying()) {
            bunyi(suara,jenis);  
            }
          }  
           
      }
  
      var vfollow = document.getElementById("vfollow");
      if (vfollow.checked && jenis=="follow") {
        if(sumber!=true){
          if(!responsiveVoice.isPlaying()) {
            bunyi(suara,jenis);  
            }
          }  
             
      }  
  
   
  
      }


  var vo=1; var asbun="";
  function bunyi(suara,jenis){
    if(asbun==suara){
      return false;
    } 
    asbun=suara;
    if(jenis!="gift" && sumber==true){
      responsiveVoice.cancel();
    }
    if(responsiveVoice.isPlaying()){
      // responsiveVoice.cancel(); 
      return false;
    }else{

      if(vo==1){
               vo=2;
                 voice = "Indonesian Female";
           }else{
               vo=1;
                  voice = "Indonesian Male";
           }

          responsiveVoice.speak(suara, voice, {
            rate: 0.9,
            pitch: 1,
            volume: 3,
            enableEstimationTimeout:false
          });

    }
          
  }
</script>


<script>
function reloadMainPageFromIframe() {
  // Mengirim pesan ke halaman utama untuk memuat ulang
  parent.postMessage({
    type: 'reloadMainPage'
  }, '*');
}
</script>


<script>
  // Fungsi untuk melakukan scroll
  function scrollDown() {
    // Menentukan elemen yang akan dijadikan batas scroll
    var stopElement = document.getElementById('stopScroll');

    // Menentukan langkah scroll per interval (misalnya, 5 piksel)
    var scrollStep = 5;

    // Melakukan scroll setiap 10 milidetik
  
      // Menambahkan langkah scroll ke posisi scroll saat ini
      window.scrollBy(0, scrollStep);

  }

   
  setTimeout(() => {
    scrollDown();
  }, 500);
</script>


<script>
  // Fungsi untuk melakukan scroll ke atas
  function scrollToTop() {
    // Menentukan langkah scroll per interval (misalnya, 5 piksel)
    var scrollStep = -5;

    // Melakukan scroll setiap 10 milidetik
    var scrollInterval = setInterval(function() {
      // Menambahkan langkah scroll ke posisi scroll saat ini
      window.scrollBy(0, scrollStep);

      // Menghentikan scroll saat mencapai bagian atas dokumen
      if (window.scrollY <= 0) {
        clearInterval(scrollInterval);
      }
    }, 10);
  }

  setTimeout(() => {
    if(!modeapp){
    $("#togel").show();
    $("#exit").hide();
  }else{
    $("#togle").show();
    $("#togel").hide();
  }
  }, 500);


</script>


  <script>
        const audioPlayer = document.getElementById('audioPlayer');
        const fileInput = document.getElementById('musik');
        
        fileInput.addEventListener('change', function(event) {
            const file = event.target.files[0];
            const fileURL = URL.createObjectURL(file);
            audioPlayer.src = fileURL;
            audioPlayer.style.display = 'block';
            audioPlayer.play();
        });
    </script>
<br><br>

<script>
        let player;

        function playAudio() {
            const youtubeURL = document.getElementById('youtubeURL').value;
            const videoID = getYoutubeVideoID(youtubeURL);
            const volume = document.getElementById('volumeRange').value;

            player = new YT.Player('player', {
                height: '0',
                width: '0',
                videoId: videoID,
                playerVars: {
                    'autoplay': 1,
                    'controls': 0,
                    'loop': 1,
                    'playlist': videoID
                },
                events: {
                    'onReady': onPlayerReady,
                    'onStateChange': onPlayerStateChange
                }
            });
        }

        function onPlayerReady(event) {
            event.target.setVolume(document.getElementById('volumeRange').value); // Set volume
        }

        function onPlayerStateChange(event) {
            if (event.data == YT.PlayerState.ENDED) {
                event.target.playVideo(); // Play the video again when it ends
            }
        }

        function getYoutubeVideoID(url) {
            const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
            const match = url.match(regExp);

            if (match && match[2].length == 11) {
                return match[2];
            } else {
                return null;
            }
        }

        document.getElementById('volumeRange').addEventListener('input', function() {
            if (player) {
                player.setVolume(this.value);
            }
        });
    </script>
    
    <script src="https://www.youtube.com/iframe_api"></script>

    <script>
        let rocketsInAirCount = 0;

        function onGift(username, profilePictureUrl, giftImageUrl, overrideEnableAudio) {
    if (rocketsInAirCount > 10) return;
    if (settings.firework_maxFireworks && rocketsInAirCount >= settings.firework_maxFireworks) return;

    // Preload images
    const preLoadImage1 = document.createElement('img');
    preLoadImage1.src = profilePictureUrl;
    document.getElementById('imagePreload').appendChild(preLoadImage1);

    const preLoadImage2 = document.createElement('img');
    preLoadImage2.src = giftImageUrl;
    document.getElementById('imagePreload').appendChild(preLoadImage2);

    // Create the rocket element
    const rocket = document.createElement('div');
    rocket.className = 'rocket';
    rocket.style.backgroundImage = `url(${profilePictureUrl})`;

    // Add z-index for rocket
    const coint = Math.floor(Math.random() * 10000 + 10000);  // Example: generate random coint value
    rocket.style.zIndex = coint;

    // Append the rocket to the body
    const randomOffset = (Math.random() * 40 - 20) + 'vmin';
    rocket.style.setProperty('--rocket-offset', randomOffset);

    document.body.appendChild(rocket);

    const verticalOffset = Math.floor(Math.random() * (75 - 60 + 1) + 60);
    rocket.style.setProperty('--rocket-offset-bottom', (verticalOffset - 2) + "vh");

    // Random duration between 2 and 3 seconds
    rocket.style.setProperty('--rocket-launch-duration', (Math.random() * 1 + 2) + 's');

    // Audio setup for rocket
    const audioRocketStart = new Audio('sounds/firework/rocket_start/rocket_start.mp3');
            audioRocketStart.volume = (settings.firework_soundVolume || 80) / 100 * 0.4;

            audioRocketStart.volume = ((settings.firework_soundVolume || 80) / 100) * 0.4;

            const audioRocketBoom = new Audio('sounds/firework/rocket_boom/rocket_boom.mp3');
audioRocketBoom.volume = (settings.firework_soundVolume || 80) / 100;

            audioRocketBoom.volume = (settings.firework_soundVolume || 80) / 100;

    // Play rocket launch sound
    if (overrideEnableAudio || (!location.href.includes("preview=1") && settings.firework_soundEnabled !== false)) {
        setTimeout(() => {
            audioRocketStart.play();
        }, 300);
    }

    rocketsInAirCount += 1;

    // Trigger explosion animation when rocket reaches the top
    rocket.addEventListener('animationend', (e) => {
        if (e.animationName === 'rocketLaunch') {
            rocket.style.animation = 'rocketExplode 0.2s ease-out forwards';
        }

        if (e.animationName === 'rocketExplode') {
            rocket.style.animation = 'rocketHide 1s ease-out forwards';

            // Create multiple explosion elements (three rings)
            // First ring (only profile pictures)
            for (let i = 0; i < 10; i++) {
                const explosion = document.createElement('div');
                explosion.className = 'explosion';
                explosion.style.borderRadius = '50%';
                explosion.style.backgroundImage = `url(${profilePictureUrl})`;
                explosion.style.setProperty('--x', Math.cos((i / 10) * 2 * Math.PI));
                explosion.style.setProperty('--y', Math.sin((i / 10) * 2 * Math.PI));
                explosion.style.transform = `translate(calc(var(--x) * ${20 + i * 5}vmin), calc(var(--y) * ${20 + i * 5}vmin))`;
                explosion.style.left = `calc(50% + ${randomOffset} - 4vmin)`;
                explosion.style.bottom = verticalOffset + 'vh';
                
                // Add z-index for explosion
                explosion.style.zIndex = coint + 1;

                document.body.appendChild(explosion);

                // Remove explosion after animation ends
                explosion.addEventListener('animationend', () => {
                    document.body.removeChild(explosion);
                });
            }

            // Username color and positioning
            let possibleColors = ['#ffcc00', '#ff9d00', '#ff4d00', '#88ff00', '#00ccff', '#ff00b3'];
            const textLabel = document.createElement('div');

            if (settings.firework_showUsername !== false) {
                textLabel.style.setProperty('--username-rotate', Math.floor(Math.random() * 20 - 10) + 'deg');
                textLabel.innerText = username;
                textLabel.style.position = 'absolute';
                textLabel.style.left = `calc(50% + ${randomOffset} - 4vmin)`;
                textLabel.style.bottom = verticalOffset + 'vh';
                textLabel.style.color = possibleColors[Math.floor(Math.random() * possibleColors.length)];

                // Add z-index for textLabel (username)
                textLabel.style.zIndex = coint + 2;
            }

            if (username.length > 30) textLabel.style['font-size'] = '3vmin';
            else if (username.length > 15) textLabel.style['font-size'] = '5vmin';
            else if (username.length > 12) textLabel.style['font-size'] = '7vmin';
            else if (username.length > 8) textLabel.style['font-size'] = '9vmin';
            else if (username.length > 5) textLabel.style['font-size'] = '13vmin';
            else if (username.length > 3) textLabel.style['font-size'] = '15vmin';
            else textLabel.style['font-size'] = '18vmin';

            textLabel.classList.add('username');
            document.body.appendChild(textLabel);

            // Second ring (mixed profile pictures and gifts)
            setTimeout(() => {
                for (let i = 0; i < 10; i++) {
                    const explosion = document.createElement('div');
                    explosion.className = 'explosion';
                    explosion.style.borderRadius = '50%';
                    explosion.style.backgroundImage = i % 2 === 0 ? `url(${profilePictureUrl})` : `url(${giftImageUrl})`;
                    explosion.style.setProperty('--x', Math.cos((i / 10) * 2 * Math.PI));
                    explosion.style.setProperty('--y', Math.sin((i / 10) * 2 * Math.PI));
                    explosion.style.transform = `translate(calc(var(--x) * ${20 + i * 5}vmin), calc(var(--y) * ${20 + i * 5}vmin))`;
                    explosion.style.left = `calc(50% + ${randomOffset} - 4vmin)`;
                    explosion.style.bottom = verticalOffset + 'vh';

                    // Add z-index for second explosion ring
                    explosion.style.zIndex = coint + 3;

                    document.body.appendChild(explosion);

                    // Remove explosion after animation ends
                    explosion.addEventListener('animationend', () => {
                        document.body.removeChild(explosion);
                    });
                }
            }, 400);

            // Third ring (only gifts)
            setTimeout(() => {
                for (let i = 0; i < 10; i++) {
                    const explosion = document.createElement('div');
                    explosion.className = 'explosion';
                    explosion.style.borderRadius = '50%';
                    explosion.style.backgroundImage = `url(${giftImageUrl})`;
                    explosion.style.setProperty('--x', Math.cos((i / 10) * 2 * Math.PI));
                    explosion.style.setProperty('--y', Math.sin((i / 10) * 2 * Math.PI));
                    explosion.style.transform = `translate(calc(var(--x) * ${25 + i * 5}vmin), calc(var(--y) * ${25 + i * 5}vmin))`;
                    explosion.style.left = `calc(50% + ${randomOffset} - 4vmin)`;
                    explosion.style.bottom = verticalOffset + 'vh';

                    // Add z-index for third explosion ring
                    explosion.style.zIndex = coint + 4;

                    document.body.appendChild(explosion);

                    // Remove explosion after animation ends
                    explosion.addEventListener('animationend', () => {
                        document.body.removeChild(explosion);
                    });
                }
            }, 800);

            setTimeout(() => {
                document.body.removeChild(rocket);
                document.body.removeChild(textLabel);
                preLoadImage1.remove();
                preLoadImage2.remove();
            }, 8000);

            setTimeout(() => {
                rocketsInAirCount += -1;
                console.log("rockets in air count", rocketsInAirCount);
            }, 2000);

            if (overrideEnableAudio || (!location.href.includes("preview=1") && settings.firework_soundEnabled !== false)) {
                setTimeout(() => {
                    audioRocketBoom.play();
                }, 200);
            }
        }
    });
}
$(window).on("load", () => {
            let giftStreaks = {};

            io.on("gift", async (giftData) => {
                if (!giftData.isTest && !settings.isPro) {
                    return;
                }

                if (!giftData.isTest && giftData.diamondCount < (settings.firework_minCoins || 1)) {
                    return;
                }

                if (giftData.giftType === 1) {
                    let key = giftData.groupId + "_" + giftData.userId + "_" + giftData.giftId;

                    if (settings.firework_repeatWithCombos === false) {
                        if (!giftStreaks[key]) {
                            giftStreaks[key] = giftData.repeatCount;
                            onGift(giftData.nickname || '', giftData.profilePictureUrl, giftData.giftPictureUrl, giftData.overrideEnableAudio);
                        }

                        if (giftData.repeatEnd) {
                            delete (giftStreaks[key]);
                        }
                        return;
                    }

                    if (!giftStreaks[key] || giftStreaks[key] > giftData.repeatCount) {
                        giftStreaks[key] = 0;
                    }

                    let repeatDiff = giftData.repeatCount - giftStreaks[key];

                    giftStreaks[key] = giftData.repeatCount;

                    if (giftData.repeatEnd) {
                        delete (giftStreaks[key]);
                    }

                    for (let i = 0; i < (repeatDiff > 5 ? 5 : repeatDiff); i++) {
                        if (giftData.repeatCount !== giftStreaks[key] && giftStreaks[key]) break;
                        onGift(giftData.nickname || '', giftData.profilePictureUrl, giftData.giftPictureUrl, giftData.overrideEnableAudio);
                        await new Promise(resolve => setTimeout(resolve, 2500));
                    }
                } else {
                    let repeat = 1;
                    if (giftData.diamondCount > 500) repeat = 2;
                    if (giftData.diamondCount > 1000) repeat = 3;
                    if (giftData.diamondCount > 5000) repeat = 5;
                    if (giftData.diamondCount > 15000) repeat = 8;
                    if (giftData.diamondCount > 30000) repeat = 10;

                    for (let i = 0; i < repeat; i++) {
                        setTimeout(() => {
                            onGift(giftData.nickname || '', giftData.profilePictureUrl, giftData.giftPictureUrl, giftData.overrideEnableAudio);
                        }, i * 2500);
                    }
                }
            });
        });

        if (!location.href.includes("cid=")) {
            onGift('bubblefoto', 'https://p16-sg.tiktokcdn.com/aweme/100x100/tos-alisg-avt-0068/d41aaaa5e8d90a3f45375b93ef48ebb4.webp', 'https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/eba3a9bb85c33e017f3648eaf88d7189~tplv-obj.webp')
        }

        let previewIndex = 0;
        let previewEnabled = true;

        function preview() {
            if (!previewEnabled) return;
            previewIndex += 1;

            if (previewIndex === 1) {
                io.fakeEmit("gift", {
                    uniqueId: 'zerodytester',
                    nickname: "Username",
                    profilePictureUrl: "https://p16-useast2a.tiktokcdn.com/tos-useast2a-avt-0068-giso/4ec174248f94de26938f73874962469b~c5_1080x1080.jpeg",
                    giftId: 5655,
                    repeatCount: 1,
                    repeatEnd: true,
                    describe: 'Sent Rose',
                    giftType: 1,
                    giftPictureUrl: 'https://p19-webcast.tiktokcdn.com/img/maliva/webcast-va/eba3a9bb85c33e017f3648eaf88d7189~tplv-obj.png',
                    diamondCount: 1,
                    isTest: true
                })
            }

            if (previewIndex === 12) {
                io.fakeEmit("gift", {
                    uniqueId: 'zerodytester',
                    nickname: "Username",
                    profilePictureUrl: "https://p16-useast2a.tiktokcdn.com/tos-useast2a-avt-0068-euttp/5d4e5d9ac5b98e0ba2a3758a05ed0bd7~c5_100x100.webp",
                    giftId: 5655,
                    repeatCount: 1,
                    repeatEnd: true,
                    describe: 'Sent Rose',
                    giftType: 1,
                    giftPictureUrl: 'https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/485175fda92f4d2f862e915cbcf8f5c4~tplv-obj.webp',
                    diamondCount: 1,
                    isTest: true
                })
            }

            if (previewIndex === 24) {
                io.fakeEmit("gift", {
                    uniqueId: 'zerodytester',
                    nickname: "Username",
                    profilePictureUrl: "https://p16-useast2a.tiktokcdn.com/tos-useast2a-avt-0068-euttp/9cc62a1d3245baf539406ad3f42beee1~tplv-tiktok-shrink:72:72.webp",
                    giftId: 5655,
                    repeatCount: 1,
                    repeatEnd: true,
                    describe: 'Sent Rose',
                    giftType: 1,
                    giftPictureUrl: 'https://p16-webcast.tiktokcdn.com/img/maliva/webcast-va/1fa0a4ed666304c78a46de200b85c84b~tplv-obj.webp',
                    diamondCount: 1,
                    isTest: true
                })
            }

            if (previewIndex === 36) {
                previewIndex = 0;
            }
        }
        
    </script>
    